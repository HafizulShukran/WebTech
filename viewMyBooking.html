<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>My Booking</title>
        
        <link rel='stylesheet' href='style.css'/>
        
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/main.css">
        <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

        
        <style>
            .custom-shadow {
                box-shadow: rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset;
            }
            .center {
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .container-custom {
                display: block;
                margin-right: auto;
                margin-left: auto;
                width: 95%;
                padding: 10px 0 10px 200px;
            }
            .header-home {
                text-align: center;
            }
            @media only screen and (max-width: 600px) {.container-custom {padding-left: 10px; padding-top: 110px;}}
        </style>
        
    </head>
    
    
    <body>
        <!-- <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-primary">

            <div class="container">
                <span class="material-icons">
                    hotel
                </span>
    
                <a class="navbar-brand" href="#"><b>Faiq Hotel</b></a>
    
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
                    aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
    
                <div class="collapse navbar-collapse" id="navbarCollapse">
    
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="#">Home</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="aboutUs.html">About us</a>
                        </li> -->
    
    
                        <!-- <c:choose>
                            <c:when test="${ADMIN != null}">
                                <li class="nav-item active">
                                    <a class="nav-link" href="javascript:;">Manage Room</a>
                                </li>
    
                            </c:when>
    
                            <c:when test="${CLIENT  != null}">
    
                            </c:when>
                        </c:choose> -->
<!--     
                    </ul>
    
                    <ul class="navbar-nav"> -->
    
                        <!-- <c:choose>
                            <c:when test="${ADMIN != null}">
    
                                <div class="offset-md-3">
                                    <li>
                                        <form action="ProfileController" method="POST">
                                            <input type="text" name="id" value="${ADMIN.getID()}" hidden="hidden">
                                            <input type="text" name="role" value="${ADMIN.getRole()}" hidden="hidden">
                                            <input type="text" name="option" value="view" hidden="hidden">
                                            <input type="submit" class="btn btn-success" value="My Profile"></button>
                                        </form>
                                    </li>
                                </div>
    
                                <div class="offset-md-3">
                                    <li class="nav-item">
                                        <a href="manageUserController?command=Logout" class="btn btn-danger" role="button"
                                            data-bs-toggle="button">Logout</a>
                                    </li>
                                </div>
    
                            </c:when>
    
                            <c:when test="${CLIENT  != null}">
    
                                <div class="offset-md-3">
                                    <li>
                                        <form action="ProfileController" method="POST">
                                            <input type="text" name="id" value="${CLIENT.getID()}" hidden="hidden">
                                            <input type="text" name="role" value="${CLIENT.getRole()}" hidden="hidden">
                                            <input type="text" name="option" value="view" hidden="hidden">
                                            <input type="submit" class="btn btn-success" value="My Profile"></button>
                                        </form>
                                    </li>
                                </div>
    
                                <div class="offset-md-3">
                                    <li class="nav-item">
                                        <a href="manageUserController?command=Logout" class="btn btn-secondary"
                                            role="button" data-bs-toggle="button">Logout</a>
                                    </li>
                                </div>
                            </c:when>
    
                            <c:otherwise>
                                <div class="offset-md-3">
                                    <li class="nav-item">
                                        <a href="NavBarController?command=Register-Page" class="btn btn-light" role="button"
                                            data-bs-toggle="button">Register</a>
                                    </li>
                                </div>
    
                                <div class="offset-md-2">
                                    <li class="nav-item">
                                        <a href="NavBarController?command=Login-Page" class="btn btn-dark" role="button"
                                            data-bs-toggle="button">Login</a>
                                    </li>
                                </div>
                            </c:otherwise>
    
                        </c:choose> -->
    
                    <!-- </ul>
                </div>
            </div>
        </nav> -->
        
        <!-- <%
            Booking booking = new Booking();
            ArrayList<Booking> myBookingList = (ArrayList<Booking>)session.getAttribute("myBookingList");
        %> -->
        
        <div class="container-custom">
            
            <nav class="navbar navbar-dark bg-dark">
                <div style="height:36px">
                    <p class="navbar-brand">My Booking List</p>
                </div>
            </nav>
        
            <div class="jumbotron" style="padding-top:25px;padding-bottom: 10px;">
                <table class="table table-hover table-info table-striped ">
                        <thead>
                            <tr>
                                <td><b>No.</b></td>
                                <td><b>Room No.</b></td>
                                <!-- <td><b>Booking Date In</b></td>
                                <td><b>Booking Date Out</b></td> -->
                                <td><b>Status </b></td>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody id=bookingDetails>
                            
                        </tbody>
                </table>
            </div>
        
        </div>
        
    </body>
    <script>
        $(document).ready(function () {
    $.ajax({
      type: "GET",
      url: "http://localhost/webTechTest/api/getBookingList.php",
      dataType: "json",
      success: function (data, status, xhr) {
        var tableContent = "<tr>";
        for (let i = 0; i < data.length; i++) {

          tableContent += "<tr><td>" + (i + 1) + "</td>";
          tableContent += "<td>" + data[i].roomID + "</td>";
          tableContent += "<td>" + data[i].status + "</td>";
          tableContent += "<td>" + "<a class='small btn btn-primary' href='viewRoom.html'>View</a>";
        }
        tableContent += "</tr>";
        document.querySelector("#bookingDetails").innerHTML = tableContent;
      },

      error: function () {
        alert(status)
      }
    });
  });
    </script>
</html>
